<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Workshop Agenda</title>
    
    <style>
        :root {
            /* === ğŸ¨ é…è‰²ä¸­å¿ƒ === */
            --page-bg-color: #2356DD; /* ä¿æŒæ‚¨é€‰å®šçš„æ·±è“ */
            --primary-color: #2356DD; 
            --card-bg: #ffffff;
            --text-main: #1d1d1f;          
            --text-sub: #86868b;           
        }

        /* --- æ ¸å¿ƒæ ·å¼ --- */
        body { 
            font-family: -apple-system, BlinkMacSystemFont, "SF Pro Text", "Helvetica Neue", Arial, sans-serif; 
            background-color: var(--page-bg-color);
            color: #ffffff; 
            padding: 20px; 
            max-width: 600px; 
            margin: 0 auto; 
            padding-bottom: 120px; 
            -webkit-tap-highlight-color: transparent; 
        }
        
        #main-content { display: none; opacity: 0; transition: opacity 0.5s; }
        
        /* é¡¶éƒ¨æ’ç‰ˆåŒºåŸŸ */
        .header-area { text-align: center; margin-bottom: 25px; }
        
        /* 1. é¡¶éƒ¨ Tencent å¤§å­— */
        .brand-title { 
            font-size: 24px; 
            font-weight: 800; 
            opacity: 1; 
            letter-spacing: 1px;
            margin-bottom: 4px;
            text-transform: uppercase;
        }

        /* 2. SIGGRAPH Asia 2025 æ·¡æ·¡çš„æ ‡è¯† */
        .series-tag {
            font-size: 14px;
            color: rgba(255,255,255, 0.5); /* åŠé€æ˜æ·¡æ·¡çš„æ•ˆæœ */
            font-weight: 600;
            margin-bottom: 10px;
            letter-spacing: 0.5px;
        }

        /* 3. ä¼šè®®ä¸»æ ‡é¢˜ */
        h1 { 
            font-size: 26px; 
            margin: 10px 0; 
            font-weight: 700; 
            line-height: 1.3;
            text-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }

        /* æ—¥æœŸ & åœ°ç‚¹ */
        .subtitle { 
            color: rgba(255,255,255, 0.9); 
            font-size: 15px; 
            margin-top: 8px; 
            font-weight: 500; 
        }
        
        /* æ–°å¢ï¼šåœ°ç‚¹æ ·å¼ */
        .location-text {
            color: rgba(255,255,255, 0.95); 
            font-size: 16px; 
            margin-top: 4px;
            font-weight: 600;
            background: rgba(0,0,0,0.1);
            display: inline-block;
            padding: 4px 12px;
            border-radius: 6px;
        }

        /* å¼•å¯¼è¯­ */
        .instruction-text {
            text-align: left;
            font-size: 13px;
            color: rgba(255,255,255, 0.7);
            margin: 25px 0 10px 5px;
            font-weight: 400;
        }
        
        /* å¡ç‰‡æ ·å¼ */
        .card { background: var(--card-bg); border-radius: 12px; padding: 16px; margin-bottom: 12px; box-shadow: 0 4px 12px rgba(0,0,0,0.1); display: flex; align-items: flex-start; transition: all 0.2s ease; border: 1px solid rgba(0,0,0,0); }
        .card:active { transform: scale(0.98); opacity: 0.9; }
        .card.selected { border: 2px solid var(--primary-color); background: #f0f5ff; }

        .checkbox-wrapper { margin-right: 16px; padding-top: 4px; display: flex; align-items: center; }
        .checkbox-wrapper input { width: 22px; height: 22px; accent-color: var(--primary-color); cursor: pointer; }
        
        .info { flex: 1; color: var(--text-main); }
        .time-tag { color: var(--primary-color); font-weight: 700; font-size: 13px; display: inline-block; background: rgba(35, 86, 221, 0.1); padding: 3px 8px; border-radius: 6px; margin-bottom: 6px; }
        .info h3 { margin: 0 0 4px 0; font-size: 16px; color: var(--text-main); line-height: 1.4; font-weight: 700; }
        .speaker { color: #333; font-weight: 500; font-size: 14px; margin: 4px 0 2px 0; }
        .affiliation { color: var(--text-sub); font-size: 12px; line-height: 1.3; }

        /* æŒ‰é’®åŒºåŸŸ */
        .btn-container { position: fixed; bottom: 30px; left: 0; right: 0; display: flex; justify-content: center; z-index: 100; pointer-events: none; flex-direction: column; align-items: center;}
        
        #generateBtn { 
            pointer-events: auto; 
            background-color: #ffffff; 
            color: var(--primary-color); 
            border: none; 
            padding: 16px 30px; 
            border-radius: 40px; 
            font-size: 17px; 
            font-weight: 700; 
            box-shadow: 0 10px 30px rgba(0,0,0,0.25); 
            cursor: pointer; 
            width: 85%; 
            max-width: 350px; 
            transition: transform 0.1s; 
            display: flex; align-items: center; justify-content: center; gap: 8px; 
        }
        #generateBtn:active { transform: scale(0.96); }
        
        .btn-hint { font-size: 12px; color: #555; margin-top: 10px; text-shadow: none; background: rgba(255,255,255,0.9); padding: 4px 12px; border-radius: 20px; font-weight: 500;}
        
        /* å¾®ä¿¡é®ç½© */
        #wx-mask { display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: #1a1a1a; z-index: 99999; color: white; padding: 40px 20px; text-align: center; }
        .mask-content { text-align: right; margin-right: 20px; margin-top: 20px;}
        .mask-arrow { font-size: 50px; animation: bounce 1.5s infinite; color: #4db8ff; display: inline-block; margin-bottom: 10px;}
        .mask-text { font-size: 20px; font-weight: bold; margin-top: 10px; line-height: 1.5; }
        .mask-sub { font-size: 14px; color: #ccc; margin-top: 15px; font-weight: normal; line-height: 1.5; border-top: 1px solid #333; padding-top: 15px;}
        @keyframes bounce { 0%, 100% { transform: translate(0, 0); } 50% { transform: translate(10px, -10px); } }
    </style>
</head>
<body>

    <!-- å¾®ä¿¡æ‹¦æˆªé®ç½© -->
    <div id="wx-mask">
        <div class="mask-content">
            <div class="mask-arrow">â†—</div>
            <div class="mask-text">
                Please open in Browser<br>
                <span style="font-size: 16px">è¯·ç‚¹å‡»å³ä¸Šè§’ï¼Œé€‰æ‹©â€œåœ¨æµè§ˆå™¨æ‰“å¼€â€</span>
            </div>
            <div class="mask-sub">
                To prevent data loss, please switch to system browser.<br>
                ä¸ºé˜²æ­¢é€‰æ‹©ä¸¢å¤±ï¼Œè¯·å…ˆè·³è½¬è‡³æµè§ˆå™¨ã€‚
            </div>
        </div>
    </div>

    <!-- ä¸»ç•Œé¢ -->
    <div id="main-content">
        <!-- æ ‡é¢˜åŒºåŸŸ -->
        <div class="header-area">
            <!-- Tencent -->
            <div class="brand-title">Tencent</div>
            
            <!-- SIGGRAPH æ·¡æ·¡çš„æ ‡ -->
            <div class="series-tag">SIGGRAPH Asia 2025</div>
            
            <!-- ä¼šè®®æ ‡é¢˜ -->
            <h1>Workshop on Neural Graphics & Generative AI</h1>
            
            <!-- æ—¥æœŸ -->
            <p class="subtitle">2025/12/16 (Tuesday)</p>
            
            <!-- åœ°ç‚¹ (æ–°å¢) -->
            <div class="location-text">ğŸ“ Location: S224-225</div>
        </div>

        <!-- å¼•å¯¼è¯­ -->
        <div class="instruction-text">Please select the talks you are interested in:</div>

        <!-- åˆ—è¡¨å®¹å™¨ -->
        <div id="session-list"></div>

        <!-- æŒ‰é’®åŒºåŸŸ -->
        <div class="btn-container">
            <button id="generateBtn" onclick="downloadICS()">
                <span style="font-size: 20px">ğŸ“…</span> Add to Calendar
            </button>
            <!-- ä¿®æ”¹ä¸º Beijing Time -->
            <div class="btn-hint">Timezone: Beijing Time (GMT+8)</div>
        </div>
    </div>

<script>
    // ================= é…ç½®åŒºåŸŸ =================
    const CONFIG = {
        date: "2025/12/16",
        location: "S224-225"
    };

    // ================= è®®ç¨‹æ•°æ® =================
    const rawData = [
        { time: "09:30 - 10:00", title: "Breakfast", speaker: "", company: "" },
        { time: "10:00 - 10:15", title: "Opening Session", speaker: "Ying Shan", company: "Tencent ARC Lab" },
        { time: "10:15 - 10:45", title: "Towards 3D-aware Video World Models", speaker: "Wenbo Hu", company: "Tencent ARC Lab" },
        { time: "10:45 - 11:15", title: "A Human-Centered Approach to Multimodal Consistent Video Generation: Models and Practical Deployments", speaker: "Tianxiang Zheng", company: "Tencent Hunyuan" },
        { time: "11:15 - 11:45", title: "GameCraft-2: Instruction-Following Interactive Game Video Generation", speaker: "Junshu Tang", company: "Tencent Hunyuan" },
        { time: "14:00 - 14:30", title: "Unleashing AI Creativity with ZenStudio: from AI-content creation product to dedicated model and technology", speaker: "Alan Zhaoã€Ran Zhang", company: "Tencent Video" },
        { time: "14:30 - 15:00", title: "AI Redefining Animation Production â€”â€” End-to-End Innovation in 3D Character Animation", speaker: "Zijiao Zeng", company: "Tencent Games" },
        { time: "15:00 - 15:30", title: "Frontier Exploration and Practices of Rendering Technologies in Gamesâ€”Breaking Aniudiovisual Boundaries, Crafting Next-Generation Interactive Experiences", speaker: "Chao Li", company: "Tencent Games" },
        { time: "15:30 - 16:00", title: "Real-time Turbulent Flows Simulation for Games", speaker: "Kui Wu", company: "Tencent Games" },
        { time: "16:00 - 16:30", title: "Curl-free and Divergence-free Wavelets for Computer Graphics", speaker: "Xiaohua Ren", company: "Weixin/WeChat" },
        { time: "16:30 - 17:00", title: "Panel Session", speaker: "Hostï¼šYuan Liu", company: "Assistant Professor, Hong Kong University of Science and Technology" }
    ];

    // ================= é€»è¾‘ä»£ç  =================
    
    // ç«‹å³æ‰§è¡Œç¯å¢ƒæ£€æµ‹
    (function checkEnvironment() {
        var ua = navigator.userAgent.toLowerCase();
        var isWeChat = ua.match(/micromessenger/i) == "micromessenger";
        
        if (isWeChat) {
            document.getElementById('wx-mask').style.display = 'block';
        } else {
            var main = document.getElementById('main-content');
            main.style.display = 'block';
            setTimeout(function() { main.style.opacity = '1'; }, 50);
        }
    })();

    const sessions = [];
    rawData.forEach((item, index) => {
        const times = item.time.split('-').map(t => t.trim());
        sessions.push({
            id: index,
            title: item.title,
            speaker: item.speaker,
            company: item.company,
            startTimeStr: times[0],
            endTimeStr: times[1],
            displayTime: item.time
        });
    });

    const listContainer = document.getElementById('session-list');
    sessions.forEach(session => {
        let speakerHtml = session.speaker ? `<p class="speaker">${session.speaker}</p>` : '';
        let companyHtml = session.company ? `<p class="affiliation">${session.company}</p>` : '';

        const html = `
            <div class="card" id="card-${session.id}" onclick="toggleCheck('${session.id}')">
                <div class="checkbox-wrapper">
                    <input type="checkbox" id="sess-${session.id}" value="${session.id}" onclick="event.stopPropagation(); updateCardStyle('${session.id}')">
                </div>
                <div class="info">
                    <span class="time-tag">${session.displayTime}</span>
                    <h3>${session.title}</h3>
                    ${speakerHtml}
                    ${companyHtml}
                </div>
            </div>
        `;
        listContainer.insertAdjacentHTML('beforeend', html);
    });

    function toggleCheck(id) {
        const checkbox = document.getElementById(`sess-${id}`);
        checkbox.checked = !checkbox.checked;
        updateCardStyle(id);
    }

    function updateCardStyle(id) {
        const checkbox = document.getElementById(`sess-${id}`);
        const card = document.getElementById(`card-${id}`);
        if (checkbox.checked) {
            card.classList.add('selected');
        } else {
            card.classList.remove('selected');
        }
    }

    function downloadICS() {
        const ua = navigator.userAgent.toLowerCase();
        const isAndroid = ua.indexOf('android') > -1;

        const checkboxes = document.querySelectorAll('input[type="checkbox"]:checked');
        if (checkboxes.length === 0) {
            alert("Please select at least one session.");
            return;
        }

        // âŒ å·²åˆ é™¤ï¼šå®‰å“çš„ confirm ç¡®è®¤å¼¹çª—
        // ç°åœ¨ç‚¹å‡»æŒ‰é’®ç›´æ¥å¼€å§‹ä¸‹è½½/å¼¹çª—

        const dateParts = CONFIG.date.split('/');
        const year = dateParts[0];
        const month = dateParts[1].padStart(2, '0');
        const day = dateParts[2].padStart(2, '0');
        const dateString = `${year}${month}${day}`;

        let icsContent = [
            "BEGIN:VCALENDAR",
            "VERSION:2.0",
            "PRODID:-//TencentConferenceHK//CN",
            "CALSCALE:GREGORIAN",
            "METHOD:PUBLISH",
            "BEGIN:VTIMEZONE",
            "TZID:Asia/Hong_Kong",
            "BEGIN:STANDARD",
            "TZOFFSETFROM:+0800",
            "TZOFFSETTO:+0800",
            "TZNAME:HKT",
            "DTSTART:19700101T000000",
            "END:STANDARD",
            "END:VTIMEZONE"
        ];

        checkboxes.forEach(box => {
            const session = sessions.find(s => s.id == box.value);
            if (session) {
                const startRaw = session.startTimeStr.replace(':', '') + '00';
                const endRaw = session.endTimeStr.replace(':', '') + '00';
                let description = "";
                if (session.speaker) description += `Speaker: ${session.speaker}\\n`;
                if (session.company) description += `Affiliation: ${session.company}`;
                
                let summary = session.title;
                if (session.speaker && !session.speaker.includes('Host')) {
                     summary = `${session.title} - ${session.speaker.split('ã€')[0]}`; 
                }

                icsContent.push("BEGIN:VEVENT");
                icsContent.push(`UID:hk-conf-${session.id}-${Date.now()}@tencent.com`);
                icsContent.push(`DTSTAMP:${getNowUTC()}`);
                icsContent.push(`DTSTART;TZID=Asia/Hong_Kong:${dateString}T${startRaw}`);
                icsContent.push(`DTEND;TZID=Asia/Hong_Kong:${dateString}T${endRaw}`);
                icsContent.push(`SUMMARY:${summary}`);
                icsContent.push(`DESCRIPTION:${description}`);
                icsContent.push(`LOCATION:${CONFIG.location}`); // å†™å…¥åœ°ç‚¹
                icsContent.push("END:VEVENT");
            }
        });

        icsContent.push("END:VCALENDAR");

        const fileContent = icsContent.join("\r\n");
        const blob = new Blob([fileContent], { type: 'text/calendar;charset=utf-8' });
        const url = URL.createObjectURL(blob);
        
        const link = document.createElement('a');
        link.href = url;
        link.setAttribute('download', 'Tencent_Workshop.ics');
        document.body.appendChild(link);
        link.click();
        document.body.removeChild(link);

        // âœ… ä¿ç•™ï¼šå®‰å“ä¸‹è½½åçš„æç¤ºï¼ˆè¿™æ˜¯å¿…é¡»çš„ï¼Œå¦åˆ™ç”¨æˆ·ä¸çŸ¥é“æ–‡ä»¶å»å“ªäº†ï¼‰
        if (isAndroid) {
            setTimeout(() => {
                alert("File downloaded.\nPlease OPEN it from notification bar to save.");
            }, 500);
        }
    }

    function getNowUTC() {
        const now = new Date();
        return now.toISOString().replace(/[-:]/g, '').split('.')[0] + 'Z';
    }
</script>

</body>
</html>
